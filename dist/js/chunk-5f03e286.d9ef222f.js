(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f03e286"],{"20c6":function(e,t,n){"use strict";n.r(t);var a=n("8bbf");function o(e,t,n,o,c,r){var i=Object(a["resolveComponent"])("v-schema-form"),s=Object(a["resolveComponent"])("a-layout-content"),l=Object(a["resolveComponent"])("a-layout");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{value:e.value,"onUpdate:value":t[0]||(t[0]=function(t){return e.value=t}),actions:e.actions,effects:e.effects,schema:e.definition,class:"demo-form"},null,8,["value","actions","effects","schema"])]})),_:1})]})),_:1})}n("380f");var c=n("f64c"),r=n("98ce"),i=n("2623"),s=n("477a");Object(r["k"])();var l=Object(a["defineComponent"])({name:"Demo",setup:function(){Object(a["ref"])({});var e=Object(a["ref"])([{basic:{bb:"a",gg:"fffff"},dd:[{ee:"是",ff:"是"}]},{basic:{bb:"c",cc:"1",gg:"1111"},dd:[{ee:"否",ff:"是"}]}]),t=Object(a["ref"])({f1:{aa:!0,cc:!0}}),n=[{text:"提交",props:{type:"primary"},action:function(e){console.log(e)}},{text:"重置",action:function(){console.log("reset")}},{text:"切换MM",action:function(e){e("kk.mm").toggle()}},{text:"校验",action:function(e){e.validate((function(e){c["a"].error(e)}))}}];return{value2:e,value:t,actions:n,definition:i["a"],effects:function(e){e("f1.aa").onFieldCreateOrChange((function(t){t?e("f1.bb").hide():e("f1.bb").show()})),e("f1.cc").onFieldCreateOrChange((function(t){t?e("$card2").hide():e("$card2").show()}))},effects2:function(e){var t=function(t,n){var a=n.substr(0,n.indexOf("."))+".basic.cc";"a"===t?(e(a).setFieldProps({loading:!0}),setTimeout((function(){e(a).setEnum(["1"]),e(a).setFieldProps({loading:!1})}),1e3)):"b"===t&&(e(a).setFieldProps({loading:!0}),setTimeout((function(){e(a).setEnum(["1","2"]),e(a).setFieldProps({loading:!1})}),1e3))};e("?.basic.bb").onFieldCreateOrChange(t);var n=function(t,n){"是"===t?e(n).takePath(1).appendPath("basic.gg").hide():"否"===t&&e(n).takePath(1).appendPath("basic.gg").show()};e("?.dd.?.ee").onFieldCreateOrChange(n),e("?.dd.?.ff").onFieldCreateOrChange((function(t,n){"是"===t?e(n).takePath(3).appendPath("ee").hide():"否"===t&&e(n).takePath(3).appendPath("ee").show()})),e("?.basic.cc").setEnum([{label:"1111",value:"1111"},{label:"2222",value:"2222"}])},schema2:s["a"]}}}),f=n("6b0d"),u=n.n(f);const d=u()(l,[["render",o]]);var p=d,b={class:"markdown-body"},m=Object(a["createElementVNode"])("h1",{id:"表单联动"},"表单联动",-1),h=Object(a["createTextVNode"])("\n"),v=Object(a["createTextVNode"])("\n"),g=Object(a["createTextVNode"])("\n  \n<template>\n  <a-layout>\n    <a-layout-content>\n      <v-schema-form\n          v-model:value=\"value\"\n          :actions=\"actions\"\n          :effects=\"effects\"\n          :schema=\"definition\"\n          class=\"demo-form\"/>\n    </a-layout-content>\n  </a-layout>\n</template>\n<script lang=\"ts\">\n  import {registerAntd, SchemaFormEvents} from '../../../schema-form';\n  import {EffectsContext} from '../../../../types';\n  import {message} from 'ant-design-vue';\n  import {defineComponent, ref} from 'vue';\n  import effects1 from '../../../views/demo/schema/effects1';\n  import effects2 from '../../../views/demo/schema/effects2';\n\n  registerAntd();\n\n  export default defineComponent({\n    name: 'Demo',\n    setup() {\n      const value3 = ref({});\n      const value2 = ref([{\n        basic: {\n          bb: 'a',\n          gg: 'fffff'\n        },\n        dd: [{\n          ee: '是',\n          ff: '是'\n        }]\n      }, {\n        basic: {\n          bb: 'c',\n          cc: '1',\n          gg: '1111'\n        },\n        dd: [{\n          ee: '否',\n          ff: '是'\n        }]\n      }]);\n      const value = ref({\n        f1: {\n          aa: true,\n          cc: true\n        }\n      });\n      const actions = [{\n        text: '提交',\n        props: {type: 'primary'},\n        action: ($) => {\n          console.log($);\n        }\n      }, {\n        text: '重置',\n        action: () => {\n          console.log('reset');\n        }\n      }, {\n        text: '切换MM',\n        action: ($) => {\n          $('kk.mm').toggle();\n        }\n      }, {\n        text: '校验',\n        action: ($: EffectsContext) => {\n          $.validate((errors) => {\n            message.error(errors);\n          });\n        }\n      }];\n      return {\n        value2,\n        value,\n        actions,\n        definition: effects1,\n        effects: ($: EffectsContext) => {\n          $('f1.aa').onFieldCreateOrChange((value) => {\n            if (value) {\n              $('f1.bb').hide();\n            } else {\n              $('f1.bb').show();\n            }\n          });\n          $('f1.cc').onFieldCreateOrChange((value) => {\n            if (value) {\n              $('$card2').hide();\n            } else {\n              $('$card2').show();\n            }\n          });\n        },\n        effects2: ($) => {\n          const cb1 = (value, path) => {\n            const updatePath = path.substr(0, path.indexOf('.')) + '.basic.cc';\n            if (value === 'a') {\n              $(updatePath).setFieldProps({loading: true});\n              setTimeout(() => {\n                $(updatePath).setEnum(['1']);\n                $(updatePath).setFieldProps({loading: false});\n              }, 1000);\n            } else if (value === 'b') {\n              $(updatePath).setFieldProps({loading: true});\n              setTimeout(() => {\n                $(updatePath).setEnum(['1', '2']);\n                $(updatePath).setFieldProps({loading: false});\n              }, 1000);\n            }\n          };\n          $('?.basic.bb').onFieldCreateOrChange(cb1);\n          const cb2 = (value, path) => {\n            if (value === '是') {\n              $(path).takePath(1).appendPath('basic.gg').hide();\n            } else if (value === '否') {\n              $(path).takePath(1).appendPath('basic.gg').show();\n            }\n          };\n          $('?.dd.?.ee').onFieldCreateOrChange(cb2);\n          $('?.dd.?.ff').onFieldCreateOrChange((value, path) => {\n            if (value === '是') {\n              $(path).takePath(3).appendPath('ee').hide();\n            } else if (value === '否') {\n              $(path).takePath(3).appendPath('ee').show();\n            }\n          });\n          $('?.basic.cc').setEnum([{\n            label: '1111', value: '1111'\n          }, {\n            label: '2222', value: '2222'\n          }]);\n        },\n        schema2: effects2\n      };\n    }\n  });\n<\/script>\n\n"),y=Object(a["createTextVNode"])("\n"),C=Object(a["defineComponent"])({setup:function(e){return function(e,t){var n=Object(a["resolveComponent"])("code-container"),o=Object(a["resolveComponent"])("demo-wrapper");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[m,Object(a["createElementVNode"])("pre",null,[Object(a["createVNode"])(o,null,{code:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(n,null,{default:Object(a["withCtx"])((function(){return[g]})),_:1})]})),default:Object(a["withCtx"])((function(){return[h,Object(a["createVNode"])(p),v,y]})),_:1})])])}}});const O=C;t["default"]=O},2623:function(e,t,n){"use strict";t["a"]={fields:{$card1:{fields:{f1:{type:"object",fields:{aa:{type:"expand-select",default:!0,enum:[{label:"是",value:!0},{label:"否",value:!1}],title:"是否隐藏AA"},bb:{type:"string",title:"AA"},cc:{type:"expand-select",default:!0,enum:[{label:"是",value:!0},{label:"否",value:!1}],title:"是否隐藏Block2"}}}},props:{title:"Block1"},type:"card"},$card2:{type:"card",props:{title:"Block2"},fields:{dd:{type:"object",fields:{ee:{type:"date",title:"EE"},ff:{type:"number",title:"FF",required:!0}}}}},$card3:{type:"card",props:{title:"Block3"},fields:{kk:{type:"object",fields:{gg:{type:"string",props:{showSearch:!0,filterLocal:!1},title:"GG"},hh:{type:"string",title:"HH"},mm:{type:"string",title:"MM"}}}}}}}},"380f":function(e,t,n){"use strict";n("b550"),n("edb9")},"477a":function(e,t,n){"use strict";t["a"]={array:!0,arrayComponent:"block",fields:{basic:{type:"object",layoutType:"card",layoutProps:{title:"基本信息"},props:{inline:!0},fields:{bb:{type:"select",props:{style:{maxWidth:300}},enum:["a","b","c","d","e"],title:"BB"},cc:{type:"select",props:{style:{maxWidth:300}},required:!0,enum:[],title:"CC"},gg:{type:"string",props:{style:{width:200}},title:"GG"}}},dd:{type:"object",array:!0,arrayComponent:"block",arrayProps:{addText:"添加一项",removeText:"删除"},layoutType:"card",layoutProps:{title:"嵌套Array"},props:{inline:!0},fields:{ee:{type:"select",props:{style:{maxWidth:300}},wrapperProps:{extra:"是否隐藏GG"},enum:["是","否"],title:"EE"},ff:{type:"select",props:{style:{maxWidth:300}},wrapperProps:{extra:"是否隐藏EE"},default:"是",enum:["是","否"],title:"FF"}}}}}},edb9:function(e,t,n){},f64c:function(e,t,n){"use strict";var a,o,c,r=n("c31d"),i=n("8bbf"),s=n("2fcd"),l=n("8fe6"),f=n("39b7"),u=n("e1b2"),d=n("0c35"),p=n("cf3f"),b=3,m=1,h="ant-message",v="move-up",g=function(){return document.body};function y(e){o?e(o):s["a"].newInstance({prefixCls:h,transitionName:v,style:{top:a},getContainer:g,maxCount:c},(function(t){o?e(o):(o=t,e(t))}))}var C={info:p["a"],success:d["a"],error:u["a"],warning:f["a"],loading:l["a"]};function O(e){var t=void 0!==e.duration?e.duration:b,n=C[e.type],a=n?Object(i["createVNode"])(n,null,null):"",c=e.key||m++,r=new Promise((function(n){var o=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};y((function(n){n.notice({key:c,duration:t,style:e.style||{},class:e.class,content:function(){return Object(i["createVNode"])("div",{class:"".concat(h,"-custom-content").concat(e.type?" ".concat(h,"-").concat(e.type):"")},[e.icon||a,Object(i["createVNode"])("span",null,[e.content])])},onClose:o})}))})),s=function(){o&&o.removeNotice(c)};return s.then=function(e,t){return r.then(e,t)},s.promise=r,s}function j(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}var x={open:O,config:function(e){void 0!==e.top&&(a=e.top,o=null),void 0!==e.duration&&(b=e.duration),void 0!==e.prefixCls&&(h=e.prefixCls),void 0!==e.getContainer&&(g=e.getContainer),void 0!==e.transitionName&&(v=e.transitionName,o=null),void 0!==e.maxCount&&(c=e.maxCount,o=null)},destroy:function(){o&&(o.destroy(),o=null)}};["success","info","warning","error","loading"].forEach((function(e){x[e]=function(t,n,a){return j(t)?x.open(Object(r["a"])(Object(r["a"])({},t),{type:e})):("function"===typeof n&&(a=n,n=void 0),x.open({content:t,duration:n,type:e,onClose:a}))}})),x.warn=x.warning,t["a"]=x}}]);
//# sourceMappingURL=chunk-5f03e286.d9ef222f.js.map
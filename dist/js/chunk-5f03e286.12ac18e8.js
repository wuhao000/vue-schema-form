(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f03e286"],{"20c6":function(e,t,n){"use strict";n.r(t);var a=n("8bbf");function o(e,t,n,o,c,i){var r=Object(a["resolveComponent"])("v-schema-form"),s=Object(a["resolveComponent"])("a-layout-content"),l=Object(a["resolveComponent"])("a-layout");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(r,{value:e.value3,"onUpdate:value":t[0]||(t[0]=function(t){return e.value3=t}),effects:e.effects3,schema:e.definition3},null,8,["value","effects","schema"]),Object(a["createVNode"])(r,{value:e.value,"onUpdate:value":t[1]||(t[1]=function(t){return e.value=t}),actions:e.actions,effects:e.effects,schema:e.definition,class:"demo-form"},null,8,["value","actions","effects","schema"])]})),_:1})]})),_:1})}n("380f");var c=n("f64c"),i=n("98ce"),r=n("2623"),s=n("477a");Object(i["k"])();var l=Object(a["defineComponent"])({name:"Demo",setup:function(){var e=Object(a["ref"])({}),t=Object(a["ref"])([{basic:{bb:"a",gg:"fffff"},dd:[{ee:"是",ff:"是"}]},{basic:{bb:"c",cc:"1",gg:"1111"},dd:[{ee:"否",ff:"是"}]}]),n=Object(a["ref"])({f1:{aa:!0,cc:!0}}),o=[{text:"提交",props:{type:"primary"},action:function(e){console.log(e)}},{text:"重置",action:function(){console.log("reset")}},{text:"切换MM",action:function(e){e("kk.mm").toggle()}},{text:"校验",action:function(e){e.validate((function(e){c["a"].error(e)}))}}];return{value3:e,effects3:function(e){e("text").subscribe(i["f"].fieldKeydown,(function(e){console.log(e)})).onFieldCreateOrChange((function(e){console.log(e)}))},definition3:{fields:{text:{type:"string",title:"abc"}}},value2:t,value:n,actions:o,definition:r["a"],effects:function(e){e("f1.aa").onFieldCreateOrChange((function(t){t?e("f1.bb").hide():e("f1.bb").show()})),e("f1.cc").onFieldCreateOrChange((function(t){t?e("$card2").hide():e("$card2").show()}))},effects2:function(e){var t=function(t,n){var a=n.substr(0,n.indexOf("."))+".basic.cc";"a"===t?(e(a).setFieldProps({loading:!0}),setTimeout((function(){e(a).setEnum(["1"]),e(a).setFieldProps({loading:!1})}),1e3)):"b"===t&&(e(a).setFieldProps({loading:!0}),setTimeout((function(){e(a).setEnum(["1","2"]),e(a).setFieldProps({loading:!1})}),1e3))};e("?.basic.bb").onFieldCreateOrChange(t);var n=function(t,n){"是"===t?e(n).takePath(1).appendPath("basic.gg").hide():"否"===t&&e(n).takePath(1).appendPath("basic.gg").show()};e("?.dd.?.ee").onFieldCreateOrChange(n),e("?.dd.?.ff").onFieldCreateOrChange((function(t,n){"是"===t?e(n).takePath(3).appendPath("ee").hide():"否"===t&&e(n).takePath(3).appendPath("ee").show()})),e("?.basic.cc").setEnum([{label:"1111",value:"1111"},{label:"2222",value:"2222"}])},schema2:s["a"]}}}),f=n("6b0d"),u=n.n(f);const d=u()(l,[["render",o]]);var p=d,b={class:"markdown-body"},m=Object(a["createElementVNode"])("h1",{id:"表单联动"},"表单联动",-1),h=Object(a["createTextVNode"])(" <template> <a-layout> <a-layout-content> <v-schema-form v-model:value=\"value3\" :effects=\"effects3\" :schema=\"definition3\"/> <v-schema-form v-model:value=\"value\" :actions=\"actions\" :effects=\"effects\" :schema=\"definition\" class=\"demo-form\"></v-schema-form> </a-layout-content> </a-layout> </template> <script lang=\"ts\"> import {registerAntd, SchemaFormEvents} from '../../../schema-form'; import {EffectsContext} from '../../../../types'; import {message} from 'ant-design-vue'; import {defineComponent, ref} from 'vue'; import effects1 from '../../../views/demo/schema/effects1'; import effects2 from '../../../views/demo/schema/effects2'; registerAntd(); export default defineComponent({ name: 'Demo', setup() { const value3 = ref({}); const value2 = ref([{ basic: { bb: 'a', gg: 'fffff' }, dd: [{ ee: '是', ff: '是' }] }, { basic: { bb: 'c', cc: '1', gg: '1111' }, dd: [{ ee: '否', ff: '是' }] }]); const value = ref({ f1: { aa: true, cc: true } }); const actions = [{ text: '提交', props: {type: 'primary'}, action: ($) => { console.log($); } }, { text: '重置', action: () => { console.log('reset'); } }, { text: '切换MM', action: ($) => { $('kk.mm').toggle(); } }, { text: '校验', action: ($: EffectsContext) => { $.validate((errors) => { message.error(errors); }); } }]; return { value3, effects3: ($: EffectsContext) => { $('text').subscribe(SchemaFormEvents.fieldKeydown, (e) => { console.log(e); }).onFieldCreateOrChange((v) => { console.log(v); }); }, definition3: { fields: { text: { type: 'string', title: 'abc' } } }, value2, value, actions, definition: effects1, effects: ($: EffectsContext) => { $('f1.aa').onFieldCreateOrChange((value) => { if (value) { $('f1.bb').hide(); } else { $('f1.bb').show(); } }); $('f1.cc').onFieldCreateOrChange((value) => { if (value) { $('$card2').hide(); } else { $('$card2').show(); } }); }, effects2: ($) => { const cb1 = (value, path) => { const updatePath = path.substr(0, path.indexOf('.')) + '.basic.cc'; if (value === 'a') { $(updatePath).setFieldProps({loading: true}); setTimeout(() => { $(updatePath).setEnum(['1']); $(updatePath).setFieldProps({loading: false}); }, 1000); } else if (value === 'b') { $(updatePath).setFieldProps({loading: true}); setTimeout(() => { $(updatePath).setEnum(['1', '2']); $(updatePath).setFieldProps({loading: false}); }, 1000); } }; $('?.basic.bb').onFieldCreateOrChange(cb1); const cb2 = (value, path) => { if (value === '是') { $(path).takePath(1).appendPath('basic.gg').hide(); } else if (value === '否') { $(path).takePath(1).appendPath('basic.gg').show(); } }; $('?.dd.?.ee').onFieldCreateOrChange(cb2); $('?.dd.?.ff').onFieldCreateOrChange((value, path) => { if (value === '是') { $(path).takePath(3).appendPath('ee').hide(); } else if (value === '否') { $(path).takePath(3).appendPath('ee').show(); } }); $('?.basic.cc').setEnum([{ label: '1111', value: '1111' }, { label: '2222', value: '2222' }]); }, schema2: effects2 }; } }); <\/script> "),v=Object(a["defineComponent"])({setup:function(e){return function(e,t){var n=Object(a["resolveComponent"])("code-container"),o=Object(a["resolveComponent"])("demo-wrapper");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[m,Object(a["createVNode"])(o,null,{code:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(n,null,{default:Object(a["withCtx"])((function(){return[h]})),_:1})]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(p)]})),_:1})])}}});const g=v;t["default"]=g},2623:function(e,t,n){"use strict";t["a"]={fields:{$card1:{fields:{f1:{type:"object",fields:{aa:{type:"expand-select",default:!0,enum:[{label:"是",value:!0},{label:"否",value:!1}],title:"是否隐藏AA"},bb:{type:"string",title:"AA"},cc:{type:"expand-select",default:!0,enum:[{label:"是",value:!0},{label:"否",value:!1}],title:"是否隐藏Block2"}}}},props:{title:"Block1"},type:"card"},$card2:{type:"card",props:{title:"Block2"},fields:{dd:{type:"object",fields:{ee:{type:"date",title:"EE"},ff:{type:"number",title:"FF",required:!0}}}}},$card3:{type:"card",props:{title:"Block3"},fields:{kk:{type:"object",fields:{gg:{type:"string",props:{showSearch:!0,filterLocal:!1},title:"GG"},hh:{type:"string",title:"HH"},mm:{type:"string",title:"MM"}}}}}}}},"380f":function(e,t,n){"use strict";n("b550"),n("edb9")},"477a":function(e,t,n){"use strict";t["a"]={array:!0,arrayComponent:"block",fields:{basic:{type:"object",layoutType:"card",layoutProps:{title:"基本信息"},props:{inline:!0},fields:{bb:{type:"select",props:{style:{maxWidth:300}},enum:["a","b","c","d","e"],title:"BB"},cc:{type:"select",props:{style:{maxWidth:300}},required:!0,enum:[],title:"CC"},gg:{type:"string",props:{style:{width:200}},title:"GG"}}},dd:{type:"object",array:!0,arrayComponent:"block",arrayProps:{addText:"添加一项",removeText:"删除"},layoutType:"card",layoutProps:{title:"嵌套Array"},props:{inline:!0},fields:{ee:{type:"select",props:{style:{maxWidth:300}},wrapperProps:{extra:"是否隐藏GG"},enum:["是","否"],title:"EE"},ff:{type:"select",props:{style:{maxWidth:300}},wrapperProps:{extra:"是否隐藏EE"},default:"是",enum:["是","否"],title:"FF"}}}}}},edb9:function(e,t,n){},f64c:function(e,t,n){"use strict";var a,o,c,i=n("c31d"),r=n("8bbf"),s=n("2fcd"),l=n("8fe6"),f=n("39b7"),u=n("e1b2"),d=n("0c35"),p=n("cf3f"),b=3,m=1,h="ant-message",v="move-up",g=function(){return document.body};function y(e){o?e(o):s["a"].newInstance({prefixCls:h,transitionName:v,style:{top:a},getContainer:g,maxCount:c},(function(t){o?e(o):(o=t,e(t))}))}var C={info:p["a"],success:d["a"],error:u["a"],warning:f["a"],loading:l["a"]};function O(e){var t=void 0!==e.duration?e.duration:b,n=C[e.type],a=n?Object(r["createVNode"])(n,null,null):"",c=e.key||m++,i=new Promise((function(n){var o=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};y((function(n){n.notice({key:c,duration:t,style:e.style||{},class:e.class,content:function(){return Object(r["createVNode"])("div",{class:"".concat(h,"-custom-content").concat(e.type?" ".concat(h,"-").concat(e.type):"")},[e.icon||a,Object(r["createVNode"])("span",null,[e.content])])},onClose:o})}))})),s=function(){o&&o.removeNotice(c)};return s.then=function(e,t){return i.then(e,t)},s.promise=i,s}function j(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}var x={open:O,config:function(e){void 0!==e.top&&(a=e.top,o=null),void 0!==e.duration&&(b=e.duration),void 0!==e.prefixCls&&(h=e.prefixCls),void 0!==e.getContainer&&(g=e.getContainer),void 0!==e.transitionName&&(v=e.transitionName,o=null),void 0!==e.maxCount&&(c=e.maxCount,o=null)},destroy:function(){o&&(o.destroy(),o=null)}};["success","info","warning","error","loading"].forEach((function(e){x[e]=function(t,n,a){return j(t)?x.open(Object(i["a"])(Object(i["a"])({},t),{type:e})):("function"===typeof n&&(a=n,n=void 0),x.open({content:t,duration:n,type:e,onClose:a}))}})),x.warn=x.warning,t["a"]=x}}]);
//# sourceMappingURL=chunk-5f03e286.12ac18e8.js.map
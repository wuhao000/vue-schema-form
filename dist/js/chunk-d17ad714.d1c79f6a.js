(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d17ad714"],{"380f":function(e,t,n){"use strict";n("b550"),n("edb9")},"62c9":function(e,t,n){"use strict";n.r(t);var o=n("8bbf"),c=Object(o["createTextVNode"])("焦点"),r=Object(o["createTextVNode"])("添加内容");function i(e,t,n,i,a,l){var u=Object(o["resolveComponent"])("v-schema-form"),s=Object(o["resolveComponent"])("a-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(u,{value:e.value,"onUpdate:value":t[0]||(t[0]=function(t){return e.value=t}),schema:e.schema,effects:e.effects},null,8,["value","schema","effects"]),Object(o["createVNode"])(s,{onClick:e.focus},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(o["createVNode"])(s,{onClick:e.addContent},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["onClick"])])}n("380f");var a=n("f64c"),l=n("98ce"),u=Object(o["defineComponent"])({name:"Demo",setup:function(){var e=Object(o["reactive"])({fields:[{property:"click",title:"点击事件监听",type:"string",props:{onClick:function(){a["a"].info("触发click事件")}}},{property:"hover",title:"点击事件监听（获得副作用函数）",type:"string",events:{onClick:function(e){a["a"].info("触发focus事件, 并获得副作用函数,切换上一个表单相的状态"),e("click").enable(!e("click").isEnabled())}}},{property:"keydown",title:"点击事件监听",type:"string",events:{onKeydown:function(e,t){a["a"].info("触发keydown事件")}}}],props:{labelWidth:"100px"}}),t=Object(o["reactive"])({}),n=Object(o["ref"])(null),c=function(){var e=n.value("name").fields()[0];e.inputRef.focus()},r=function(e){n.value=e,e("name").onFieldBlur((function(e,t){console.log("blur",e,t)})),e("name").onFieldFocus((function(e,t){console.log("onFocus")}))},i=function(){c();var e=n.value("name").fields()[0],t=e.inputRef,o=t.selectionEnd,r="abc";n.value("name").value(t.value.substr(0,o)+r+t.value.substr(o)),setTimeout((function(){t.setSelectionRange(o+r.length,o+r.length)}),0)};return Object(l["k"])(),{schema:e,addContent:i,value:t,effects:r,focus:c}},data:function(){return{}},created:function(){Object(l["k"])()},methods:{}}),s=n("6b0d"),d=n.n(s);const f=d()(u,[["render",i]]);var p=f,m={class:"markdown-body"},b=Object(o["createElementVNode"])("h1",{id:"事件处理"},"事件处理",-1),v=Object(o["createElementVNode"])("h2",{id:"配置说明"},"配置说明",-1),j=Object(o["createElementVNode"])("p",null,"在vue3.0中，事件的传递和普通属性是一样的，因此在props直接使用onXx（例如onClick）的属性既可配置事件处理函数，例如：",-1),O=Object(o["createTextVNode"])(" const field: SchemaFormField = { type: 'string', property: 'name', props: { onClick: (event) => { console.log('clicked') } } } "),C=Object(o["createElementVNode"])("p",null,"但在v-schema-form中，如果想要在事件中获得副作用处理函数来与其他字段产生联动，就要按如下方式配置：",-1),y=Object(o["createElementVNode"])("p",null,"在字段配置的events属性上声明事件处理函数，例如：",-1),g=Object(o["createTextVNode"])(" const field: SchemaFormField = { type: 'string', property: 'name', events: { onClick: ($: EffectsContext, event) => { console.log('clicked'); // 这里可以利用副作用处理函数$来实现联动操作 } } } "),k=Object(o["createElementVNode"])("br",null,null,-1),h=Object(o["createElementVNode"])("blockquote",null,[Object(o["createElementVNode"])("p",null,"在events中声明的事件处理函数，第一个参数永远是副作用处理函数（通常命名为$）")],-1),x=Object(o["createTextVNode"])(" <template> <div> <v-schema-form v-model:value=\"value\" :schema=\"schema\" :effects=\"effects\"/> <a-button @click=\"focus\">焦点</a-button> <a-button @click=\"addContent\">添加内容</a-button> </div> </template> <script lang=\"ts\"> import {defineComponent, reactive, ref} from 'vue'; import {EffectsContext} from '../../../../types'; import {registerAntd} from '../../../schema-form'; import {message} from 'ant-design-vue'; export default defineComponent({ name: 'Demo', setup() { const schema = reactive({ fields: [ { property: 'click', title: '点击事件监听', type: 'string', props: { onClick: () => { message.info('触发click事件'); } } }, { property: 'hover', title: '点击事件监听（获得副作用函数）', type: 'string', events: { onClick: ($) => { message.info('触发focus事件, 并获得副作用函数,切换上一个表单相的状态'); $('click').enable(!$('click').isEnabled()); } } }, { property: 'keydown', title: '点击事件监听', type: 'string', events: { onKeydown: ($, e) => { message.info('触发keydown事件'); } } }, ], props: { labelWidth: '100px' } }); const value = reactive({}); const context = ref(null); const focus = () => { const field = context.value('name').fields()[0]; field.inputRef.focus(); }; const effects = ($: EffectsContext) => { context.value = $; $('name').onFieldBlur((a, b) => { console.log('blur', a, b); }); $('name').onFieldFocus((a, b) => { console.log('onFocus') }); }; const addContent = () => { focus(); const field = context.value('name').fields()[0]; const input = field.inputRef as HTMLInputElement; const caretIndex = input.selectionEnd; const content = 'abc'; context.value('name').value( input.value.substr(0, caretIndex) + content + input.value.substr(caretIndex) ); setTimeout(() => { input.setSelectionRange(caretIndex + content.length, caretIndex + content.length); }, 0); }; registerAntd(); return { schema, addContent, value, effects, focus }; }, data() { return {}; }, created() { registerAntd(); }, methods: {} }); <\/script> "),N=Object(o["defineComponent"])({setup:function(e){return function(e,t){var n=Object(o["resolveComponent"])("code-editor"),c=Object(o["resolveComponent"])("code-container"),r=Object(o["resolveComponent"])("demo-wrapper");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[b,v,j,Object(o["createVNode"])(n,{mode:"typescript"},{default:Object(o["withCtx"])((function(){return[O]})),_:1}),C,y,Object(o["createVNode"])(n,{mode:"typescript"},{default:Object(o["withCtx"])((function(){return[g]})),_:1}),k,h,Object(o["createVNode"])(r,null,{code:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[x]})),_:1})]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p)]})),_:1})])}}});const w=N;t["default"]=w},edb9:function(e,t,n){},f64c:function(e,t,n){"use strict";var o,c,r,i=n("c31d"),a=n("8bbf"),l=n("2fcd"),u=n("8fe6"),s=n("39b7"),d=n("e1b2"),f=n("0c35"),p=n("cf3f"),m=3,b=1,v="ant-message",j="move-up",O=function(){return document.body};function C(e){c?e(c):l["a"].newInstance({prefixCls:v,transitionName:j,style:{top:o},getContainer:O,maxCount:r},(function(t){c?e(c):(c=t,e(t))}))}var y={info:p["a"],success:f["a"],error:d["a"],warning:s["a"],loading:u["a"]};function g(e){var t=void 0!==e.duration?e.duration:m,n=y[e.type],o=n?Object(a["createVNode"])(n,null,null):"",r=e.key||b++,i=new Promise((function(n){var c=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};C((function(n){n.notice({key:r,duration:t,style:e.style||{},class:e.class,content:function(){return Object(a["createVNode"])("div",{class:"".concat(v,"-custom-content").concat(e.type?" ".concat(v,"-").concat(e.type):"")},[e.icon||o,Object(a["createVNode"])("span",null,[e.content])])},onClose:c})}))})),l=function(){c&&c.removeNotice(r)};return l.then=function(e,t){return i.then(e,t)},l.promise=i,l}function k(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}var h={open:g,config:function(e){void 0!==e.top&&(o=e.top,c=null),void 0!==e.duration&&(m=e.duration),void 0!==e.prefixCls&&(v=e.prefixCls),void 0!==e.getContainer&&(O=e.getContainer),void 0!==e.transitionName&&(j=e.transitionName,c=null),void 0!==e.maxCount&&(r=e.maxCount,c=null)},destroy:function(){c&&(c.destroy(),c=null)}};["success","info","warning","error","loading"].forEach((function(e){h[e]=function(t,n,o){return k(t)?h.open(Object(i["a"])(Object(i["a"])({},t),{type:e})):("function"===typeof n&&(o=n,n=void 0),h.open({content:t,duration:n,type:e,onClose:o}))}})),h.warn=h.warning,t["a"]=h}}]);
//# sourceMappingURL=chunk-d17ad714.d1c79f6a.js.map
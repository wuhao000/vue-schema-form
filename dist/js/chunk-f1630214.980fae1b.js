(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1630214"],{"380f":function(e,n,t){"use strict";t("b550"),t("edb9")},"62c9":function(e,n,t){"use strict";t.r(n);var o=t("8bbf"),c=Object(o["createTextVNode"])("获得焦点"),r=Object(o["createTextVNode"])("在光标处添加内容");function i(e,n,t,i,l,a){var u=Object(o["resolveComponent"])("v-schema-form"),s=Object(o["resolveComponent"])("a-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(u,{value:e.value,"onUpdate:value":n[0]||(n[0]=function(n){return e.value=n}),schema:e.schema,effects:e.effects},null,8,["value","schema","effects"]),Object(o["createVNode"])(s,{onClick:e.focus},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(o["createVNode"])(s,{onClick:e.addContent},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["onClick"])])}t("380f");var l=t("f64c"),a=t("98ce"),u=Object(o["defineComponent"])({name:"Demo",setup:function(){var e=Object(o["reactive"])({fields:[{property:"click",title:"点击事件监听",type:"string",props:{onClick:function(){l["a"].info("触发click事件")}}},{property:"hover",title:"点击事件监听（获得副作用函数）",type:"string",events:{onClick:function(e){l["a"].info("触发focus事件, 并获得副作用函数,切换上一个表单相的状态"),e("click").enable(!e("click").isEnabled())}}},{property:"keydown",title:"点击事件监听",type:"string",events:{onKeydown:function(){l["a"].info("触发keydown事件")}}}],props:{labelWidth:"100px"}}),n=Object(o["reactive"])({}),t=Object(o["ref"])(null),c=function(){var e=t.value("click").field();e.inputRef.focus()},r=function(e){t.value=e,e("name").onFieldBlur((function(e,n){console.log("blur",e,n)})),e("name").onFieldFocus((function(){console.log("onFocus")}))},i=function(){c();var e=t.value("click").field(),n=e.inputRef,o=n.selectionEnd,r="abc";t.value("click").value(n.value.substr(0,o)+r+n.value.substr(o)),setTimeout((function(){n.setSelectionRange(o+r.length,o+r.length)}),0)};return Object(a["k"])(),{schema:e,addContent:i,value:n,effects:r,focus:c}},data:function(){return{}},created:function(){Object(a["k"])()},methods:{}}),s=t("6b0d"),d=t.n(s);const f=d()(u,[["render",i]]);var p=f,b={class:"markdown-body"},m=Object(o["createElementVNode"])("h1",{id:"事件处理"},"事件处理",-1),v=Object(o["createElementVNode"])("h2",{id:"配置说明"},"配置说明",-1),j=Object(o["createElementVNode"])("p",null,"在vue3.0中，事件的传递和普通属性是一样的，因此在props直接使用onXx（例如onClick）的属性既可配置事件处理函数，例如：",-1),O=Object(o["createTextVNode"])("\n  const field: SchemaFormField = {\n  type: 'string',\n  property: 'name',\n  props: {\n    onClick: (event) => {\n      console.log('clicked')\n    }\n  }\n}\n"),C=Object(o["createElementVNode"])("p",null,"但在v-schema-form中，如果想要在事件中获得副作用处理函数来与其他字段产生联动，就要按如下方式配置：",-1),k=Object(o["createElementVNode"])("p",null,"在字段配置的events属性上声明事件处理函数，例如：",-1),y=Object(o["createTextVNode"])("\n  const field: SchemaFormField = {\n  type: 'string',\n  property: 'name',\n  events: {\n    onClick: ($: EffectsContext, event) => {\n      console.log('clicked');\n      // 这里可以利用副作用处理函数$来实现联动操作\n    }\n  }\n}\n"),g=Object(o["createElementVNode"])("br",null,null,-1),h=Object(o["createElementVNode"])("blockquote",null,[Object(o["createElementVNode"])("p",null,"在events中声明的事件处理函数，第一个参数永远是副作用处理函数（通常命名为$）")],-1),x=Object(o["createTextVNode"])("\n"),N=Object(o["createTextVNode"])("\n"),V=Object(o["createTextVNode"])("\n  \n<template>\n  <div>\n    <v-schema-form\n        v-model:value=\"value\"\n        :schema=\"schema\"\n        :effects=\"effects\"/>\n    <a-button @click=\"focus\">获得焦点</a-button>\n    <a-button @click=\"addContent\">在光标处添加内容</a-button>\n  </div>\n</template>\n<script lang=\"ts\">\n  import {defineComponent, reactive, ref} from 'vue';\n  import {EffectsContext} from '../../../../types';\n  import {registerAntd} from '../../../schema-form';\n  import {message} from 'ant-design-vue';\n\n  export default defineComponent({\n    name: 'Demo',\n    setup() {\n      const schema = reactive({\n        fields: [\n          {\n            property: 'click',\n            title: '点击事件监听',\n            type: 'string',\n            props: {\n              onClick: () => {\n                message.info('触发click事件');\n              }\n            }\n          },\n          {\n            property: 'hover',\n            title: '点击事件监听（获得副作用函数）',\n            type: 'string',\n            events: {\n              onClick: ($) => {\n                message.info('触发focus事件, 并获得副作用函数,切换上一个表单相的状态');\n                $('click').enable(!$('click').isEnabled());\n              }\n            }\n          },\n          {\n            property: 'keydown',\n            title: '点击事件监听',\n            type: 'string',\n            events: {\n              onKeydown: () => {\n                message.info('触发keydown事件');\n              }\n            }\n          },\n        ],\n        props: {\n          labelWidth: '100px'\n        }\n      });\n      const value = reactive({});\n      const context = ref(null);\n      const focus = () => {\n        const field = context.value('click').field();\n        field.inputRef.focus();\n      };\n      const effects = ($: EffectsContext) => {\n        context.value = $;\n        $('name').onFieldBlur((a, b) => {\n          console.log('blur', a, b);\n        });\n        $('name').onFieldFocus(() => {\n          console.log('onFocus')\n        });\n      };\n      const addContent = () => {\n        focus();\n        const field = context.value('click').field();\n        const input = field.inputRef as HTMLInputElement;\n        const caretIndex = input.selectionEnd;\n        const content = 'abc';\n        context.value('click').value(\n            input.value.substr(0, caretIndex) + content + input.value.substr(caretIndex)\n        );\n        setTimeout(() => {\n          input.setSelectionRange(caretIndex + content.length, caretIndex + content.length);\n        }, 0);\n      };\n      registerAntd();\n\n      return {\n        schema,\n        addContent,\n        value,\n        effects,\n        focus\n      };\n    },\n    data() {\n      return {};\n    },\n    created() {\n      registerAntd();\n    },\n    methods: {}\n  });\n<\/script>\n\n"),w=Object(o["createTextVNode"])("\n"),E=Object(o["defineComponent"])({setup:function(e){return function(e,n){var t=Object(o["resolveComponent"])("code-editor"),c=Object(o["resolveComponent"])("code-container"),r=Object(o["resolveComponent"])("demo-wrapper");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[m,v,j,Object(o["createElementVNode"])("pre",null,[Object(o["createVNode"])(t,{mode:"typescript"},{default:Object(o["withCtx"])((function(){return[O]})),_:1})]),C,k,Object(o["createElementVNode"])("pre",null,[Object(o["createVNode"])(t,{mode:"typescript"},{default:Object(o["withCtx"])((function(){return[y]})),_:1})]),g,h,Object(o["createElementVNode"])("pre",null,[Object(o["createVNode"])(r,null,{code:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[V]})),_:1})]})),default:Object(o["withCtx"])((function(){return[x,Object(o["createVNode"])(p),N,w]})),_:1})])])}}});const F=E;n["default"]=F},edb9:function(e,n,t){},f64c:function(e,n,t){"use strict";var o,c,r,i=t("c31d"),l=t("8bbf"),a=t("2fcd"),u=t("8fe6"),s=t("39b7"),d=t("e1b2"),f=t("0c35"),p=t("cf3f"),b=3,m=1,v="ant-message",j="move-up",O=function(){return document.body};function C(e){c?e(c):a["a"].newInstance({prefixCls:v,transitionName:j,style:{top:o},getContainer:O,maxCount:r},(function(n){c?e(c):(c=n,e(n))}))}var k={info:p["a"],success:f["a"],error:d["a"],warning:s["a"],loading:u["a"]};function y(e){var n=void 0!==e.duration?e.duration:b,t=k[e.type],o=t?Object(l["createVNode"])(t,null,null):"",r=e.key||m++,i=new Promise((function(t){var c=function(){return"function"===typeof e.onClose&&e.onClose(),t(!0)};C((function(t){t.notice({key:r,duration:n,style:e.style||{},class:e.class,content:function(){return Object(l["createVNode"])("div",{class:"".concat(v,"-custom-content").concat(e.type?" ".concat(v,"-").concat(e.type):"")},[e.icon||o,Object(l["createVNode"])("span",null,[e.content])])},onClose:c})}))})),a=function(){c&&c.removeNotice(r)};return a.then=function(e,n){return i.then(e,n)},a.promise=i,a}function g(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}var h={open:y,config:function(e){void 0!==e.top&&(o=e.top,c=null),void 0!==e.duration&&(b=e.duration),void 0!==e.prefixCls&&(v=e.prefixCls),void 0!==e.getContainer&&(O=e.getContainer),void 0!==e.transitionName&&(j=e.transitionName,c=null),void 0!==e.maxCount&&(r=e.maxCount,c=null)},destroy:function(){c&&(c.destroy(),c=null)}};["success","info","warning","error","loading"].forEach((function(e){h[e]=function(n,t,o){return g(n)?h.open(Object(i["a"])(Object(i["a"])({},n),{type:e})):("function"===typeof t&&(o=t,t=void 0),h.open({content:n,duration:t,type:e,onClose:o}))}})),h.warn=h.warning,n["a"]=h}}]);
//# sourceMappingURL=chunk-f1630214.980fae1b.js.map